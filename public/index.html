<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Design By Meg</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      color: #333;
    }

    header {
      background: rgba(255, 255, 255, 0.95);
      padding: 1rem 2rem;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      position: sticky;
      top: 0;
    }

    header h1 {
      color: #667eea;
      font-size: 2rem;
    }

    .hero {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 4rem 2rem;
      text-align: center;
      margin-bottom: 3rem;
    }

    .hero h2 {
      font-size: 3rem;
      margin-bottom: 1rem;
    }

    .hero p {
      font-size: 1.1rem;
      opacity: 0.9;
    }

    .posts {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 2rem;
      margin-bottom: 3rem;
    }

    .post-card {
      background: white;
      border-radius: 8px;
      padding: 1.5rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .post-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
    }

    .post-card h3 {
      color: #667eea;
      margin-bottom: 0.5rem;
      font-size: 1.3rem;
    }

    .post-card .date {
      color: #999;
      font-size: 0.85rem;
      margin-bottom: 0.5rem;
    }

    .post-card p {
      color: #555;
      line-height: 1.6;
      margin-bottom: 1rem;
    }

    .post-card a {
      color: #667eea;
      text-decoration: none;
      font-weight: 600;
      transition: color 0.3s;
    }

    .post-card a:hover {
      color: #764ba2;
    }

    footer {
      background: rgba(255, 255, 255, 0.95);
      text-align: center;
      padding: 2rem;
      margin-top: 3rem;
      color: #666;
      border-top: 1px solid #ddd;
    }

    .loading {
      text-align: center;
      padding: 2rem;
      color: white;
      font-size: 1.1rem;
    }

    .error {
      background: #ff6b6b;
      color: white;
      padding: 1.5rem;
      border-radius: 8px;
      margin: 2rem;
      text-align: center;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    }

    .error strong {
      display: block;
      margin-bottom: 0.5rem;
    }

    .error a {
      color: #fff;
      text-decoration: underline;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <header>
    <h1>üé® Design By Meg</h1>
  </header>

  <div class="hero">
    <h2 id="site-title">Design By Meg</h2>
    <p>Creative Design Solutions</p>
  </div>

  <div id="loading" class="loading">Loading posts from Firestore...</div>
  <div id="error" class="error" style="display:none;"></div>
  <div id="posts" class="posts"></div>

  <footer>
    <p>&copy; 2024 Design By Meg. All rights reserved.</p>
    <p>Hosted on <strong>Firebase Hosting</strong> (Free Tier) with Firestore</p>
  </footer>

  <!-- Firebase SDK - Direct Firestore Access (No Cloud Functions) -->
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.2/firebase-app.js';
    import { getFirestore, collection, query, where, orderBy, limit, getDocs } from 'https://www.gstatic.com/firebasejs/10.7.2/firebase-firestore.js';

    // Firebase config for designedbymeg-355ff
    const firebaseConfig = {
      apiKey: "AIzaSyBKl38rxI3Wj64Kp6n6lU9V-bHvP3r4ILc",
      authDomain: "designedbymeg-355ff.firebaseapp.com",
      projectId: "designedbymeg-355ff",
      storageBucket: "designedbymeg-355ff.appspot.com",
      messagingSenderId: "724969050379",
      appId: "1:724969050379:web:e8bffe0c8e6e7c1d4a0e69"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    async function loadPosts() {
      try {
        const postsRef = collection(db, 'wp_posts');
        const q = query(
          postsRef,
          where('post_status', '==', 'publish'),
          where('post_type', '==', 'post'),
          orderBy('post_date', 'desc'),
          limit(10)
        );

        const querySnapshot = await getDocs(q);
        const postsContainer = document.getElementById('posts');
        const loadingDiv = document.getElementById('loading');

        if (querySnapshot.empty) {
          loadingDiv.innerHTML = '<p style="color: white; text-align: center; margin-top: 2rem;">üìù No posts found in Firestore.</p>';
          return;
        }

        loadingDiv.style.display = 'none';

        querySnapshot.forEach(doc => {
          const post = doc.data();
          const postCard = document.createElement('div');
          postCard.className = 'post-card';
          const postDate = post.post_date ? new Date(post.post_date).toLocaleDateString() : 'No date';
          const excerpt = post.post_excerpt || (post.post_content ? post.post_content.substring(0, 150) : 'No excerpt');
          postCard.innerHTML = `
            <h3>${post.post_title || 'Untitled'}</h3>
            <div class="date">${postDate}</div>
            <p>${excerpt}</p>
            <a href="/post/${post.ID || doc.id}">Read More ‚Üí</a>
          `;
          postsContainer.appendChild(postCard);
        });
      } catch (error) {
        console.error('Error loading posts:', error);
        const errorDiv = document.getElementById('error');
        errorDiv.innerHTML = `
          <strong>‚ö†Ô∏è Firestore Setup Required</strong>
          Error: ${error.message}<br><br>
          <strong>To activate your site:</strong><br>
          1. Go to <a href="https://console.firebase.google.com/project/designedbymeg-355ff/firestore" target="_blank">Firebase Console</a><br>
          2. Create Firestore Database collection named "wp_posts"<br>
          3. Import WordPress posts from your SQL database<br>
          4. Update Firestore security rules to allow reads<br><br>
          <em>No paid plan required - Free tier supports this!</em>
        `;
        errorDiv.style.display = 'block';
        document.getElementById('loading').style.display = 'none';
      }
    }

    // Load posts on page load
    loadPosts();
  </script>
</body>
</html>
